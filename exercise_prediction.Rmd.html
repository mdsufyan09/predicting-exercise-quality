<!DOCTYPE html>

<!--
#
# index.htm
#
# Copyright (C) 2009-19 by RStudio, PBC
#
# This program is licensed to you under the terms of version 3 of the
# GNU Affero General Public License. This program is distributed WITHOUT
# ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,
# MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the
# AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.
#
-->

<!-- standards mode -->
<html lang="en">
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta name="gwt:property" content="compiler.stackMode=native"/>
    
    <meta name="csrf-token" content="e6e7c263-de5a-4039-95be-52672525e587" />
    <link rel="shortcut icon" href="images/favicon.ico" />
    <title>RStudio</title>
    
    <link type="text/css" rel="stylesheet" href="css/icons.css" />
    <link type="text/css" rel="stylesheet" href="css/focus-visible.css" />
    <script type="text/javascript" language="javascript" src="js/text.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/inert-polyfill.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/focus-visible.min.js"></script>
    <script type="text/javascript" language="javascript" src="rstudio/rstudio.nocache.js"></script>
  </head>

  <body>
  <script>
    const coursera_getParentTargetDomain = function() {
      if (location.ancestorOrigins && location.ancestorOrigins[0]) {
        return location.ancestorOrigins[0];
      }
      return "https://www.coursera.org";
    };
    </script>
<script>
    if (window.parent !== window) {
      (function() {
        var historyWrapper = function(functionType) {
          var whichFunc = history[functionType];
          return function() {
            var response = whichFunc.apply(this, arguments);
            var eventRes = new Event(functionType);
            eventRes.arguments = arguments;
            window.dispatchEvent(eventRes);
            return response;
          };
        };
        history.pushState = historyWrapper("pushState");
        history.replaceState = historyWrapper("replaceState");
        const sendInnerFrameUrl = function() {
          window.parent.postMessage({'innerFrameUrl': window.location.href, 'fromInnerFrame': true}, coursera_getParentTargetDomain());
        };
        window.addEventListener("pushState",    sendInnerFrameUrl);
        window.addEventListener("replaceState", sendInnerFrameUrl);
        window.addEventListener("popstate",     sendInnerFrameUrl);
        window.addEventListener("hashchange",   sendInnerFrameUrl);
      })();
    }
    </script>
<script>
    if (window.parent !== window) {
      window.parent.postMessage({'innerFrameUrl': window.location.href, 'fromInnerFrame': true}, coursera_getParentTargetDomain());
    }
    </script>
<script>
    if (window.parent !== window) {
      (function() {
        function throttle(callback, limit) {
          var waiting = false;                      // Initially, we're not waiting
          return function () {                      // We return a throttled function
            if (!waiting) {                         // If we're not waiting
              callback.apply(this, arguments);      // Execute users function
              waiting = true;                       // Prevent future invocations
              setTimeout(function () {              // After a period of time
                  waiting = false;                  // And allow future invocations
              }, limit);
            }
          }
        }

        const notify = (userActionType) => {
          window.parent.postMessage({'isActive': true, 'fromInnerFrame': true, 'userActionType': userActionType}, coursera_getParentTargetDomain());
        };

        const throttledNotifyKeyPress = throttle(() => notify('key_press'), 10000);
        const throttledNotifyMouseMovement = throttle(() => notify('mouse_movement'), 10000);
        const throttledNotifyClick = throttle(() => notify('key_press'), 10000);

        window.addEventListener('keydown', throttledNotifyKeyPress);
        window.addEventListener('mousemove', throttledNotifyMouseMovement);
        window.addEventListener('click', throttledNotifyClick);
      })();
    }
    </script></body>

</html>
